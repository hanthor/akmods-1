---
defaults:
  kernel_flavor: almalinux
  version: 10
  akmods_target: nvidia

arch-all: &arch-all
  architecture:
    - aarch64
    - x86_64
    - x86_64-v2

akmods-base: &akmods-base
  org: ublue-os
  registry: ghcr.io
  repo: akmods
  transport: docker://

akmods-common: &akmods-common
  name: akmods
  description: "A caching layer for pre-built akmod RPMs"

akmods-nvidia: &akmods-nvidia
  name: akmods-nvidia
  description: "A caching layer for the pre-built nvidia akmod RPMs"

akmods-zfs: &akmods-zfs
  name: akmods-zfs
  description: "A caching layer for the pre-built zfs akmod RPMs"

desktop-build-group: &desktop-build-group
  nvidia:
    !!merge <<:
      - *akmods-base
      - *akmods-nvidia
      - *arch-all
  zfs:
    !!merge <<:
      - *akmods-base
      - *akmods-zfs
      - *arch-all
  common:
    !!merge <<:
      - *akmods-base
      - *akmods-common
      - *arch-all

images:
  10:
    almalinux:
      nvidia:
        !!merge <<:
          - *akmods-base
          - *akmods-nvidia
          - *arch-all
      zfs:
        !!merge <<:
          - *akmods-base
          - *akmods-zfs
          - *arch-all
  "10-kitten":
    almalinux:
      nvidia:
        !!merge <<:
          - *akmods-base
          - *akmods-nvidia
          - *arch-all
      zfs:
        !!merge <<:
          - *akmods-base
          - *akmods-zfs
          - *arch-all
